<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a Ratio Trait — ratio • glydet</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a Ratio Trait — ratio"><meta name="description" content="A ratio trait is the ratio of total abundance of two groups of glycans.
For example, the ratio of complex glycans and hybrid glycans,
or the ratio of bisecting and unbisecting glycans."><meta property="og:description" content="A ratio trait is the ratio of total abundance of two groups of glycans.
For example, the ratio of complex glycans and hybrid glycans,
or the ratio of bisecting and unbisecting glycans."><meta property="og:image" content="https://glycoverse.github.io/glydet/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">glydet</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/glydet.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/custom-traits.html">Defining Custom Traits</a></li>
    <li><a class="dropdown-item" href="../articles/quantify-motifs.html">Quantifying Glycan Motifs</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create a Ratio Trait</h1>

      <div class="d-none name"><code>ratio.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A ratio trait is the ratio of total abundance of two groups of glycans.
For example, the ratio of complex glycans and hybrid glycans,
or the ratio of bisecting and unbisecting glycans.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ratio</span><span class="op">(</span><span class="va">num_cond</span>, <span class="va">denom_cond</span>, within <span class="op">=</span> <span class="cn">NULL</span>, na_action <span class="op">=</span> <span class="st">"keep"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-num-cond">num_cond<a class="anchor" aria-label="anchor" href="#arg-num-cond"></a></dt>
<dd><p>Condition to use for defining the numerator.
An expression that evaluates to a logical vector.
The names of all built-in meta-properties (see <code><a href="all_mp_fns.html">all_mp_fns()</a></code>) and custom meta-properties
can be used in the expression.</p></dd>


<dt id="arg-denom-cond">denom_cond<a class="anchor" aria-label="anchor" href="#arg-denom-cond"></a></dt>
<dd><p>Condition to use for defining the denominator. Same format as <code>num_cond</code>.</p></dd>


<dt id="arg-within">within<a class="anchor" aria-label="anchor" href="#arg-within"></a></dt>
<dd><p>Condition to set a restriction for the glycans. Same format as <code>num_cond</code>.</p></dd>


<dt id="arg-na-action">na_action<a class="anchor" aria-label="anchor" href="#arg-na-action"></a></dt>
<dd><p>How to handle missing values.</p><ul><li><p>"keep" (default): keep the missing values as NA.</p></li>
<li><p>"zero": set the missing values to 0.</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A derived trait function.</p>
    </div>
    <div class="section level2">
    <h2 id="how-to-use">How to use<a class="anchor" aria-label="anchor" href="#how-to-use"></a></h2>



<p>You can use <code>ratio()</code> to create ratio trait easily.</p>
<p>For example:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="co"># Ratio of complex glycans and hybrid glycans</span></span>
<span><span class="fu"><a href="../reference/ratio.html">ratio</a></span><span class="op">(</span><span class="va">Tp</span> <span class="op">==</span> <span class="st">"complex"</span>, <span class="va">Tp</span> <span class="op">==</span> <span class="st">"hybrid"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ratio of bisecting and unbisecting glycans</span></span>
<span><span class="fu"><a href="../reference/ratio.html">ratio</a></span><span class="op">(</span><span class="va">B</span>, <span class="op">!</span><span class="va">B</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ratio of core-fucosylated and non-core-fucosylated glycans within complex glycans</span></span>
<span><span class="fu"><a href="../reference/ratio.html">ratio</a></span><span class="op">(</span><span class="va">nFc</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">Tp</span> <span class="op">==</span> <span class="st">"complex"</span>, <span class="va">nFc</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">Tp</span> <span class="op">==</span> <span class="st">"complex"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The above example can be simplified as:</span></span>
<span><span class="fu"><a href="../reference/ratio.html">ratio</a></span><span class="op">(</span><span class="va">nFc</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="va">nFc</span> <span class="op">==</span> <span class="fl">0</span>, within <span class="op">=</span> <span class="op">(</span><span class="va">Tp</span> <span class="op">==</span> <span class="st">"complex"</span><span class="op">)</span><span class="op">)</span>  <span class="co"># more readable</span></span></code></pre><p></p></div>
<p>Note that the last example uses <code>&amp;</code> for logical AND.
Actually, you can use any logical operator in the expression in R (e.g., <code>|</code>, <code>!</code>, etc.).</p>
<p><code><a href="prop.html">prop()</a></code> is a special case of <code>ratio()</code>,
i.e., <code>prop(cond, within)</code> is equivalent to <code>ratio(cond &amp; within, within)</code>.
We recommend using <code><a href="prop.html">prop()</a></code> instead of <code>ratio()</code> for clarity if possible.</p>
    </div>
    <div class="section level2">
    <h2 id="note-about-na">Note about NA<a class="anchor" aria-label="anchor" href="#note-about-na"></a></h2>



<p>All the internal summation operations ignore NAs by default.
Therefore, NAs in the expression matrix and meta-property values will not result in NAs in the derived traits.
However, as all derived traits calculate a ratio of two values,
NAs will be introduced when:</p><ol><li><p>The denominator is 0. This can happen when the <code>within</code> condition selects no glycans.</p></li>
<li><p>Both the numerator and denominator are 0.</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Ratio of complex glycans and hybrid glycans</span></span></span>
<span class="r-in"><span><span class="fu">ratio</span><span class="op">(</span><span class="va">Tp</span> <span class="op">==</span> <span class="st">"complex"</span>, <span class="va">Tp</span> <span class="op">==</span> <span class="st">"hybrid"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ratio(<span style="font-weight: bold;">Tp == "complex"</span>, <span style="font-weight: bold;">Tp == "hybrid"</span>, na_action = "keep")</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Ratio of bisecting and unbisecting glycans within bi-antennary glycans</span></span></span>
<span class="r-in"><span><span class="fu">ratio</span><span class="op">(</span><span class="va">B</span>, <span class="op">!</span><span class="va">B</span>, within <span class="op">=</span> <span class="op">(</span><span class="va">nA</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ratio(<span style="font-weight: bold;">B</span>, <span style="font-weight: bold;">!B</span>, within = <span style="font-weight: bold;">(nA == 2)</span>, na_action = "keep")</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bin Fu.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

